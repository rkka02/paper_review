# Copy to `.env` and fill values. Keep secrets out of git.

# Postgres (local)
DATABASE_URL=postgresql+psycopg2://postgres:postgres@localhost:5432/paper_review

# Supabase (recommended: Pooler / IPv4)
# DATABASE_URL=postgresql+psycopg2://postgres.<project_ref>:<password>@aws-0-<region>.pooler.supabase.com:6543/postgres?sslmode=require

# OpenAI
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4.1-mini
OPENAI_DELETE_FILES=true
OPENAI_TIMEOUT_SECONDS=600

# Embeddings (local vs OpenAI)
# - local: HuggingFace/SentenceTransformers (recommended for local pipeline)
# - openai: OpenAI embeddings API (requires OPENAI_API_KEY)
EMBEDDINGS_PROVIDER=local
EMBEDDINGS_NORMALIZE=true

# Local embeddings
LOCAL_EMBED_MODEL=intfloat/e5-base-v2
# LOCAL_EMBED_DEVICE=cuda
LOCAL_EMBED_BATCH_SIZE=32

# OpenAI embeddings
OPENAI_EMBED_MODEL=text-embedding-3-large
OPENAI_EMBED_BATCH_SIZE=96

# Local recommender pipeline (runs on your machine, uploads results to server)
SERVER_BASE_URL=http://127.0.0.1:8000
# SERVER_API_KEY= (defaults to API_KEY if set)
RECOMMENDER_QUERY_LLM_PROVIDER=ollama
RECOMMENDER_DECIDER_LLM_PROVIDER=openai

# Local LLM (Ollama recommended)
OLLAMA_BASE_URL=http://127.0.0.1:11434
OLLAMA_TIMEOUT_SECONDS=120

# Model name in Ollama (e.g., `gpt-oss-20b`)
LOCAL_LLM_MODEL=gpt-oss-20b

# Generation options (shared across local backends)
LOCAL_LLM_MAX_NEW_TOKENS=256
LOCAL_LLM_TEMPERATURE=0.2
LOCAL_LLM_TOP_P=0.95

# Optional: HuggingFace Transformers local LLM backend (slower startup; only used if provider=hf)
LOCAL_LLM_DEVICE_MAP=auto
LOCAL_LLM_TORCH_DTYPE=auto
LOCAL_LLM_TRUST_REMOTE_CODE=false

# Google Drive (pick ONE approach)
# (A) OAuth refresh token (recommended for personal Drive)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REFRESH_TOKEN=

# (B) Service account (recommended for Shared Drive / team)
# GOOGLE_SERVICE_ACCOUNT_FILE=./secrets/google-service-account.json

# Drive API scope
# - readonly (download only): https://www.googleapis.com/auth/drive.readonly
# - read+write (upload+download): https://www.googleapis.com/auth/drive
GOOGLE_DRIVE_SCOPE=https://www.googleapis.com/auth/drive.readonly

# Optional: if set, uploads go into this folder
GOOGLE_DRIVE_UPLOAD_FOLDER_ID=

# Optional: Semantic Scholar (rate limits vary)
SEMANTIC_SCHOLAR_API_KEY=

# Optional: protect API endpoints
API_KEY=

# Web UI login (recommended for Cloud deploy)
# If WEB_USERNAME/WEB_PASSWORD are set, SESSION_SECRET is required.
WEB_USERNAME=
WEB_PASSWORD=
SESSION_SECRET=
COOKIE_HTTPS_ONLY=false

# Local PDF upload storage (used by /api/papers/upload)
UPLOAD_DIR=./data/uploads
UPLOAD_BACKEND=local

# Worker
WORKER_POLL_SECONDS=3
MAX_PDF_MB=50
